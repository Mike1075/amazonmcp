import{a as w,c as d,e as m,i as p,l as u}from"/build/_shared/chunk-IASYZMWF.js";import{b as y,c as i}from"/build/_shared/chunk-Q3IECNXJ.js";var x=y((_,g)=>{g.exports={}});var P=i(x(),1);var b=i(w(),1);var e=i(u(),1),k=()=>[{title:"\u667A\u80FD\u6BD4\u4EF7\u795E\u5668 - \u591A\u5E73\u53F0\u5546\u54C1\u4EF7\u683C\u5BF9\u6BD4"},{name:"description",content:"\u4E00\u952E\u641C\u7D22\uFF0C\u591A\u5E73\u53F0\u6BD4\u4EF7\uFF0C\u5E2E\u60A8\u627E\u5230\u6700\u4F18\u60E0\u7684\u4EF7\u683C"}];function v(){let{products:r,query:t,scrapeResults:s,total:c}=p(),o=d().state==="submitting",[f,h]=(0,b.useState)([]);return(0,e.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100",children:(0,e.jsxs)("div",{className:"container mx-auto px-4 py-16",children:[(0,e.jsxs)("header",{className:"text-center mb-16 pt-8",children:[(0,e.jsx)("h1",{className:"text-5xl font-bold text-gray-900 mb-6",children:"\u{1F6D2} \u667A\u80FD\u6BD4\u4EF7\u795E\u5668"}),(0,e.jsx)("p",{className:"text-xl text-gray-600 mb-8",children:"\u4E00\u952E\u641C\u7D22\uFF0C\u591A\u5E73\u53F0\u6BD4\u4EF7\uFF0C\u5E2E\u60A8\u627E\u5230\u6700\u4F18\u60E0\u7684\u4EF7\u683C"})]}),(0,e.jsxs)("div",{className:"max-w-4xl mx-auto mb-16 px-4",children:[(0,e.jsx)(m,{method:"get",className:"bg-white rounded-xl shadow-lg p-6 mb-8",children:(0,e.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,e.jsx)("div",{className:"flex-1",children:(0,e.jsx)("input",{name:"q",type:"text",placeholder:"\u8F93\u5165\u4EA7\u54C1\u540D\u79F0\uFF0C\u5982\uFF1AiPhone\u3001MacBook\u3001AirPods...",defaultValue:t||"",className:"w-full px-6 py-4 text-lg border-2 border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all"})}),(0,e.jsxs)("div",{className:"flex gap-3",children:[(0,e.jsx)("button",{type:"submit",disabled:o,className:"px-8 py-4 bg-blue-600 text-white font-semibold rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:o?"\u641C\u7D22\u4E2D...":"\u{1F50D} \u641C\u7D22"}),(0,e.jsx)("button",{type:"submit",name:"scrape",value:"true",disabled:o,className:"px-8 py-4 bg-yellow-500 text-gray-900 font-semibold rounded-lg hover:bg-yellow-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:o?"\u6293\u53D6\u4E2D...":"\u26A1 \u7ACB\u5373\u6293\u53D6"})]})]})}),!t&&(0,e.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4",children:(0,e.jsxs)("div",{className:"flex items-start",children:[(0,e.jsx)("svg",{className:"w-5 h-5 text-blue-500 mr-2 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,e.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,e.jsxs)("div",{children:[(0,e.jsx)("h3",{className:"text-sm font-medium text-blue-800 mb-1",children:"\u4F7F\u7528\u6307\u5357"}),(0,e.jsxs)("p",{className:"text-sm text-blue-700",children:[(0,e.jsx)("strong",{children:"\u641C\u7D22"}),"\uFF1A\u67E5\u770B\u6570\u636E\u5E93\u4E2D\u5DF2\u6709\u7684\u4EF7\u683C\u6570\u636E",(0,e.jsx)("br",{}),(0,e.jsx)("strong",{children:"\u7ACB\u5373\u6293\u53D6"}),"\uFF1A\u4ECE\u5404\u5927\u7535\u5546\u5E73\u53F0\u83B7\u53D6\u6700\u65B0\u5B9E\u65F6\u4EF7\u683C\uFF08\u63A8\u8350\uFF09"]})]})]})}),(0,e.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,e.jsx)("span",{className:"text-sm text-gray-600 mr-2",children:"\u5E73\u53F0\u7B5B\u9009:"}),["amazon","walmart","ebay","target"].map(a=>(0,e.jsx)("button",{type:"button",onClick:()=>{h(n=>n.includes(a)?n.filter(N=>N!==a):[...n,a])},className:`px-3 py-1 text-sm rounded-full border ${f.includes(a)?"bg-blue-100 border-blue-300 text-blue-700":"bg-white border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:a.charAt(0).toUpperCase()+a.slice(1)},a))]})]}),s&&(0,e.jsx)("div",{className:"max-w-6xl mx-auto mb-6",children:(0,e.jsxs)("div",{className:`p-4 rounded-lg ${s.success?"bg-green-50 border border-green-200":"bg-red-50 border border-red-200"}`,children:[(0,e.jsxs)("div",{className:"flex items-center",children:[s.success?(0,e.jsx)("svg",{className:"w-5 h-5 text-green-500 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,e.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}):(0,e.jsx)("svg",{className:"w-5 h-5 text-red-500 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,e.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),(0,e.jsx)("span",{className:`font-medium ${s.success?"text-green-800":"text-red-800"}`,children:s.success?"\u2705 \u4EF7\u683C\u6293\u53D6\u6210\u529F\uFF01":"\u274C \u4EF7\u683C\u6293\u53D6\u5931\u8D25"})]}),(0,e.jsx)("p",{className:`mt-1 text-sm ${s.success?"text-green-700":"text-red-700"}`,children:s.message||s.error}),s.success&&s.total_saved&&(0,e.jsxs)("p",{className:"mt-1 text-sm text-green-600",children:["\u6210\u529F\u4FDD\u5B58 ",s.total_saved," \u4E2A\u4EA7\u54C1\u7684\u4EF7\u683C\u6570\u636E"]})]})}),(0,e.jsxs)("div",{className:"max-w-6xl mx-auto",children:[t&&(0,e.jsxs)("h2",{className:"text-2xl font-semibold mb-6",children:['\u641C\u7D22\u7ED3\u679C: "',t,'" (',r.length," \u4E2A\u4EA7\u54C1)"]}),!t&&(0,e.jsx)("h2",{className:"text-2xl font-semibold mb-6",children:"\u70ED\u95E8\u4EA7\u54C1"}),(0,e.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:r.map(a=>(0,e.jsx)($,{product:a},a.id))}),r.length===0&&t&&(0,e.jsx)("div",{className:"text-center py-12",children:(0,e.jsx)("p",{className:"text-gray-500 text-lg",children:"\u6CA1\u6709\u627E\u5230\u76F8\u5173\u4EA7\u54C1\uFF0C\u8BF7\u5C1D\u8BD5\u5176\u4ED6\u5173\u952E\u8BCD"})})]})]})})}function $({product:r}){let t=r.price_records.sort((l,o)=>l.price-o.price),s=t[0],c=t.length>1?`$${s.price} - $${t[t.length-1].price}`:`$${s?.price||"N/A"}`;return(0,e.jsxs)("div",{className:"bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition-shadow",children:[(0,e.jsx)("div",{className:"aspect-w-16 aspect-h-9",children:(0,e.jsx)("img",{src:r.image_url||"https://images.unsplash.com/photo-1560472354-b33ff0c44a43?w=300",alt:r.name,className:"w-full h-48 object-cover"})}),(0,e.jsxs)("div",{className:"p-4",children:[(0,e.jsx)("h3",{className:"font-semibold text-lg mb-2 line-clamp-2",children:r.name}),(0,e.jsx)("p",{className:"text-gray-600 text-sm mb-3 line-clamp-2",children:r.description}),(0,e.jsxs)("div",{className:"space-y-2",children:[(0,e.jsxs)("div",{className:"flex justify-between items-center",children:[(0,e.jsx)("span",{className:"text-2xl font-bold text-green-600",children:c}),(0,e.jsxs)("span",{className:"text-sm text-gray-500",children:[t.length," \u4E2A\u5E73\u53F0"]})]}),t.length>0&&(0,e.jsxs)("div",{className:"space-y-1",children:[t.slice(0,3).map((l,o)=>(0,e.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,e.jsx)("span",{className:"capitalize font-medium",children:l.platform}),(0,e.jsxs)("div",{className:"flex items-center gap-2",children:[(0,e.jsxs)("span",{className:o===0?"text-green-600 font-semibold":"text-gray-600",children:["$",l.price]}),o===0&&(0,e.jsx)("span",{className:"text-xs bg-green-100 text-green-700 px-2 py-1 rounded",children:"\u6700\u4F4E\u4EF7"})]})]},l.id)),t.length>3&&(0,e.jsxs)("div",{className:"text-xs text-gray-500 text-center",children:["+",t.length-3," \u66F4\u591A\u5E73\u53F0"]})]})]})]})]})}export{v as default,k as meta};
